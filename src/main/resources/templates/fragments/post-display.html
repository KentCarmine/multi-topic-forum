<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Post</title>
    </head>
    <body>
        <div th:fragment="post-fragment (post)"> <!--TODO: Add upvote/downvote display and arg-->
            <div th:id="'post_id_' + ${post.getId()}">
                <div>
                    <span>
                        <a href="#" th:href="@{'/users/' + ${post.getUser().getUsername()}}" th:text="${post.getUser().getUsername()}">Poster</a>
                    </span>
                    <span> @ </span>
                    <span th:text="${post.getPostedAt().toString()}">Timestamp</span>
                    <span> | </span>
                    <span th:if="${loggedInUser == null}" th:text="${post.getVoteCount()}"></span>

                    <span th:if="${loggedInUser != null}">
                        <span>
                            <img th:if="${voteMap.get(post.getId()) == 0 || voteMap.get(post.getId()) == -1}" src="/images/green-arrow-hollow.png" width="32" height="32">
                            <img th:if="${voteMap.get(post.getId()) == 1}" src="/images/black-arrow-green-filled.png" width="32" height="32">
                        </span>
                        <span th:text="${post.getVoteCount()}">
                            ###
                        </span>
                        <span>
                            <img th:if="${voteMap.get(post.getId()) == 0 || voteMap.get(post.getId()) == 1}" src="/images/red-arrow-hollow.png" width="32" height="32">
                            <img th:if="${voteMap.get(post.getId()) == -1}" src="/images/black-arrow-red-filled.png" width="32" height="32">
                        </span>
                    </span>
                </div>
                <div th:text="${post.getContent()}">
                    Content
                </div>
                <hr>
            </div>
        </div>

        <div th:fragment="post-summary-fragment (post)">
            <div>
                <span>
                    <a href="#" th:href="@{'/forum/' + ${post.getThread().getForum().getName()} + '/show/' + ${post.getThread().getId()} + '#post_id_' + ${post.getId()}}" th:text="${post.getThread().getTitle()}">Thread Title</a>
                </span>
                <span> @ </span>
                <span th:text="${post.getPostedAt().toString()}">Timestamp</span>
            </div>
            <div th:text="${post.getAbbreviatedContent()}"> <!--TODO: Restrict content length-->
                Abbreviated Content
            </div>
            <hr>
        </div>
    </body>
</html>